(function(n){n.ajaxLoading=function(t){var r=function(i){n.ajaxLoading.cleanup();t.success&&t.success(i)},u=function(){n.ajaxLoading.cleanup();n.ajaxLoading.errorStart();t.error&&t.error()},f=function(){n.ajaxLoading.cleanup();t.done&&t.done()},e={success:r,error:u,done:f},o={400:function(){location.reload()},401:function(){location.reload()}},i;return t.statusCode=n.extend({},o,t.statusCode),i=n.extend({},t,e),n.ajaxLoading.loadingStart(),n.ajax(i),this};n.ajaxLoading.loadingStart=function(){n.ajaxLoading.timer||(n.ajaxLoading.timer=setTimeout(function(){n(n.ajaxLoading.defaults.selector).addClass(n.ajaxLoading.defaults.loadingClass);clearTimeout(n.ajaxLoading.timer)},n.ajaxLoading.defaults.timeout))};n.ajaxLoading.errorStart=function(){n(n.ajaxLoading.defaults.selector).addClass(n.ajaxLoading.defaults.errorClass);n.ajaxLoading.timer=setTimeout(function(){n.ajaxLoading.cleanup()},n.ajaxLoading.defaults.timeout)};n.ajaxLoading.cleanup=function(){clearTimeout(n.ajaxLoading.timer);n.ajaxLoading.timer=null;n(n.ajaxLoading.defaults.selector).removeClass(n.ajaxLoading.defaults.loadingClass);n(n.ajaxLoading.defaults.selector).removeClass(n.ajaxLoading.defaults.errorClass)};n.ajaxLoading.timer=null;n.ajaxLoading.defaults={selector:"body",loadingClass:"loading",errorClass:"error",timeout:500}})(jQuery);